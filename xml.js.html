<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>xml.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Account.html">Account</a><ul class='methods'><li data-type='method'><a href="Account.html#get">get</a></li><li data-type='method'><a href="Account.html#getTransactions">getTransactions</a></li></ul></li><li><a href="AccountResponse.html">AccountResponse</a></li><li><a href="Application.html">Application</a><ul class='methods'><li data-type='method'><a href="Application.html#create">create</a></li><li data-type='method'><a href="Application.html#delete">delete</a></li><li data-type='method'><a href="Application.html#get">get</a></li><li data-type='method'><a href="Application.html#list">list</a></li><li data-type='method'><a href="Application.html#update">update</a></li></ul></li><li><a href="ApplicationListResponse.html">ApplicationListResponse</a></li><li><a href="ApplicationResponse.html">ApplicationResponse</a></li><li><a href="AvailableNumber.html">AvailableNumber</a><ul class='methods'><li data-type='method'><a href="AvailableNumber.html#search">search</a></li><li data-type='method'><a href="AvailableNumber.html#searchAndOrder">searchAndOrder</a></li></ul></li><li><a href="AvailableNumberResponse.html">AvailableNumberResponse</a></li><li><a href="Bridge.html">Bridge</a><ul class='methods'><li data-type='method'><a href="Bridge.html#create">create</a></li><li data-type='method'><a href="Bridge.html#get">get</a></li><li data-type='method'><a href="Bridge.html#getCalls">getCalls</a></li><li data-type='method'><a href="Bridge.html#list">list</a></li><li data-type='method'><a href="Bridge.html#playAudioAdvanced">playAudioAdvanced</a></li><li data-type='method'><a href="Bridge.html#playAudioFile">playAudioFile</a></li><li data-type='method'><a href="Bridge.html#speakSentence">speakSentence</a></li><li data-type='method'><a href="Bridge.html#update">update</a></li></ul></li><li><a href="BridgeListResponse.html">BridgeListResponse</a></li><li><a href="BridgeResponse.html">BridgeResponse</a></li><li><a href="BXMLResponse.html">BXMLResponse</a><ul class='methods'><li data-type='method'><a href="BXMLResponse.html#call">call</a></li><li data-type='method'><a href="BXMLResponse.html#conference">conference</a></li><li data-type='method'><a href="BXMLResponse.html#gather">gather</a></li><li data-type='method'><a href="BXMLResponse.html#hangup">hangup</a></li><li data-type='method'><a href="BXMLResponse.html#playAudio">playAudio</a></li><li data-type='method'><a href="BXMLResponse.html#record">record</a></li><li data-type='method'><a href="BXMLResponse.html#redirect">redirect</a></li><li data-type='method'><a href="BXMLResponse.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="BXMLResponse.html#speakSentence">speakSentence</a></li><li data-type='method'><a href="BXMLResponse.html#toString">toString</a></li><li data-type='method'><a href="BXMLResponse.html#transfer">transfer</a></li></ul></li><li><a href="Call.html">Call</a><ul class='methods'><li data-type='method'><a href="Call.html#answer">answer</a></li><li data-type='method'><a href="Call.html#completeGather">completeGather</a></li><li data-type='method'><a href="Call.html#create">create</a></li><li data-type='method'><a href="Call.html#createGather">createGather</a></li><li data-type='method'><a href="Call.html#get">get</a></li><li data-type='method'><a href="Call.html#getEvent">getEvent</a></li><li data-type='method'><a href="Call.html#getEvents">getEvents</a></li><li data-type='method'><a href="Call.html#getGather">getGather</a></li><li data-type='method'><a href="Call.html#getRecordings">getRecordings</a></li><li data-type='method'><a href="Call.html#getTranscriptions">getTranscriptions</a></li><li data-type='method'><a href="Call.html#hangup">hangup</a></li><li data-type='method'><a href="Call.html#list">list</a></li><li data-type='method'><a href="Call.html#playAudioAdvanced">playAudioAdvanced</a></li><li data-type='method'><a href="Call.html#playAudioFile">playAudioFile</a></li><li data-type='method'><a href="Call.html#reject">reject</a></li><li data-type='method'><a href="Call.html#sendDtmf">sendDtmf</a></li><li data-type='method'><a href="Call.html#speakSentence">speakSentence</a></li><li data-type='method'><a href="Call.html#transfer">transfer</a></li></ul></li><li><a href="CallResponse.html">CallResponse</a></li><li><a href="CatapultClient.html">CatapultClient</a></li><li><a href="Conference.html">Conference</a><ul class='methods'><li data-type='method'><a href="Conference.html#create">create</a></li><li data-type='method'><a href="Conference.html#createMember">createMember</a></li><li data-type='method'><a href="Conference.html#get">get</a></li><li data-type='method'><a href="Conference.html#getMember">getMember</a></li><li data-type='method'><a href="Conference.html#getMembers">getMembers</a></li><li data-type='method'><a href="Conference.html#playAudioAdvanced">playAudioAdvanced</a></li><li data-type='method'><a href="Conference.html#playAudioAdvancedToMember">playAudioAdvancedToMember</a></li><li data-type='method'><a href="Conference.html#playAudioFile">playAudioFile</a></li><li data-type='method'><a href="Conference.html#playAudioFileToMember">playAudioFileToMember</a></li><li data-type='method'><a href="Conference.html#remove">remove</a></li><li data-type='method'><a href="Conference.html#removeMember">removeMember</a></li><li data-type='method'><a href="Conference.html#speakSentence">speakSentence</a></li><li data-type='method'><a href="Conference.html#speakSentenceToMember">speakSentenceToMember</a></li><li data-type='method'><a href="Conference.html#update">update</a></li><li data-type='method'><a href="Conference.html#updateMember">updateMember</a></li></ul></li><li><a href="ConferenceResponse.html">ConferenceResponse</a></li><li><a href="Domain.html">Domain</a><ul class='methods'><li data-type='method'><a href="Domain.html#create">create</a></li><li data-type='method'><a href="Domain.html#delete">delete</a></li><li data-type='method'><a href="Domain.html#list">list</a></li></ul></li><li><a href="DomainResponse.html">DomainResponse</a></li><li><a href="DownloadMediaFileResponse.html">DownloadMediaFileResponse</a></li><li><a href="Endpoint.html">Endpoint</a><ul class='methods'><li data-type='method'><a href="Endpoint.html#create">create</a></li><li data-type='method'><a href="Endpoint.html#createAuthToken">createAuthToken</a></li><li data-type='method'><a href="Endpoint.html#delete">delete</a></li><li data-type='method'><a href="Endpoint.html#get">get</a></li><li data-type='method'><a href="Endpoint.html#list">list</a></li><li data-type='method'><a href="Endpoint.html#update">update</a></li></ul></li><li><a href="EndpointResponse.html">EndpointResponse</a></li><li><a href="Error.html">Error</a><ul class='methods'><li data-type='method'><a href="Error.html#get">get</a></li><li data-type='method'><a href="Error.html#list">list</a></li></ul></li><li><a href="ErrorResponse.html">ErrorResponse</a></li><li><a href="EventResponse.html">EventResponse</a></li><li><a href="GatherResponse.html">GatherResponse</a></li><li><a href="Media.html">Media</a><ul class='methods'><li data-type='method'><a href="Media.html#delete">delete</a></li><li data-type='method'><a href="Media.html#download">download</a></li><li data-type='method'><a href="Media.html#list">list</a></li><li data-type='method'><a href="Media.html#upload">upload</a></li></ul></li><li><a href="MediaFileResponse.html">MediaFileResponse</a></li><li><a href="Message.html">Message</a><ul class='methods'><li data-type='method'><a href="Message.html#get">get</a></li><li data-type='method'><a href="Message.html#list">list</a></li><li data-type='method'><a href="Message.html#send">send</a></li></ul></li><li><a href="MessageResponse.html">MessageResponse</a></li><li><a href="NumberInfo.html">NumberInfo</a><ul class='methods'><li data-type='method'><a href="NumberInfo.html#get">get</a></li></ul></li><li><a href="NumberInfoResponse.html">NumberInfoResponse</a></li><li><a href="OrderedNumberResponse.html">OrderedNumberResponse</a></li><li><a href="PhoneNumber.html">PhoneNumber</a><ul class='methods'><li data-type='method'><a href="PhoneNumber.html#create">create</a></li><li data-type='method'><a href="PhoneNumber.html#delete">delete</a></li><li data-type='method'><a href="PhoneNumber.html#get">get</a></li><li data-type='method'><a href="PhoneNumber.html#list">list</a></li><li data-type='method'><a href="PhoneNumber.html#update">update</a></li></ul></li><li><a href="PhoneNumberResponse.html">PhoneNumberResponse</a></li><li><a href="Recording.html">Recording</a><ul class='methods'><li data-type='method'><a href="Recording.html#createTranscription">createTranscription</a></li><li data-type='method'><a href="Recording.html#get">get</a></li><li data-type='method'><a href="Recording.html#getTranscription">getTranscription</a></li><li data-type='method'><a href="Recording.html#getTranscriptions">getTranscriptions</a></li><li data-type='method'><a href="Recording.html#list">list</a></li></ul></li><li><a href="RecordingResponse.html">RecordingResponse</a></li><li><a href="TransactionListResponse.html">TransactionListResponse</a></li><li><a href="TransactionResponse.html">TransactionResponse</a></li><li><a href="TranscriptionResponse.html">TranscriptionResponse</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getNextLink">getNextLink</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">xml.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var builder = require("xmlbuilder");
/**
 * Creates a new BXML Response object.
 * Call .toString() on this method to obtain the BXML string.
 * @constructor
 */

var BXMLResponse = function () {
	this.xml = builder.create("Response", {
		encoding : "UTF-8"
	});
	/**
	 * Create a SpeakSentence tag.
	 * @param {string} sentence The sentence to have the voice say.
	 * @param {Object} params The parameters for the API SpeakSentence call.
	 * @param {string} [params.gender="female"] The gender of the speaker.
	 * @param {string} [params.locale="en_US"] The locale for the speaker.
	 * @param {string} [params.voice="julie"] The voice for the speaker.
	 * @return {BXMLResponse} this, for chaining
	 * @example
	 * //This app will speak two sentences.
	 * var myApp = new BXMLResponse();
	 * myApp.speakSentence("Thanks for calling Unicorn Enterprises.")
	 *      .speakSentence("Someone will be with you shortly.");
	 * myApp = myApp.toString();
	 */

	this.speakSentence = function (sentence, params) {
		params = params || { };
		params.locale = params.locale || "en_US";
		params.gender = params.gender || "female";
		params.voice = params.voice || "julie";
		this.xml = this.xml.ele("SpeakSentence", params, sentence).up();
		return this;
	};

	/**
	 * Create a Gather call, which collects pressed numbers.
	 * @param {Object} params The parameters for the Gather verb.
	 * @param {string} params.requestURL Relative or absolute URL to send events to and request new BXML.
	 * @param {number} [params.requestURLTimeout=3000] Time to wait for requestURL response in ms.
	 * @param {string} [params.terminatingDigits=#] Digits to stop gather.
	 * @param {number} [params.maxDigits=128] Maximum number of digits to collect.
	 * @param {number} [params.integerDigitTimeout=5] Timeout between digits.
	 * @param {boolean} [params.bargeable=true] Boolean indicating if audio should stop when digit is pressed.
	 * @param {function} [callback] A function containing the verbs to be nested inside the Gather call.
	 * @return {BXMLResponse} this, for chaining
	 * @example
	 * //This app will collect a PIN code.
	 * var myApp = new BXMLResponse();
	 * myApp.gather({
	 *     requestUrl : 'http://unico.rn/pinApiEndpoint',
	 *     maxDigits  : 4
	 * }, function () {
	 *     this.speakSentence("Please enter your PIN code.")
	 * });
	 * myApp = myApp.toString();
	 */
	this.gather = function (params, callback) {
		this.xml = this.xml.ele("Gather", params);
		callback = callback || function () {};
		callback.call(this);
		this.xml = this.xml.up();
		return this;
	};

	/**
	 * @return {string} A string representation of the object's BXML.
	 */
	this.toString = function () {
		return this.xml.end({
			pretty : true,
			indent : "     "
		}).toString();
	};

	/**
	 * Create a new call to another phone number.
	 * @param {Object} params The parameters for the Call verb.
	 * @param {string} params.from Defines the number the call will be created from.
	 * @param {string} params.to Defines the number the call will be made to.
	 * @param {string} [params.requestUrl] URL to send event
	 * @param {number} [params.timeout] The timeout, in seconds, for the call to answer
	 * @param {number} [params.requestUrlTimeout] Timeout, in ms, to request new BXML document
	 * @param {function} [callback] A function containing the verbs to be nested inside the Call verb
	 * @return {BXMLResponse} this, for chaining
	 * @example
	 * //This app will create a call and tell the callee they are being called.
	 * var myApp = new BXMLResponse();
	 * myApp.call({
	 *      from : '+19195551212',
	 *      to   : '+19195551213'
	 * }, function () {
	 *      this.speakSentence("You are recieving a call from 919 555 1212.");
	 * });
	 * myApp = myApp.toString();
	 */
	this.call = function (params, callback) {
		this.xml = this.xml.ele("Call", params);
		callback = callback || function () {};
		callback.call(this);
		this.xml = this.xml.up();
		return this;
	};

	/**
	 * Create a new conference call.
	 * @param {Object} params The parameters for the Conference verb.
	 * @param {string} params.from The phone number that will host the conference.
	 * @param {string} [params.statusCallbackUrl] URL to which conference callbacks will be POSTed
	 * @param {boolean} [params.joinTone=true] Determines whether or not a tone is played on join.
	 * @param {boolean} [params.leavingTone=true] Determines whether or not a tone is played on leave.
	 * @param {string} [params.tag] A string that will be included in the callback events of the conference.
	 * @param {boolean} [params.mute=false] Determines whether or not the member will join muted.
	 * @param {boolean} [params.hold=false] Determines whether or not the member will join on hold.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * //This app will create a conference call. Callers to (919) 555 1212 will be patched in.
	 * var myApp = new BXMLResponse();
	 * myApp.conference({
	 *     from : '+19195551212'
	 * });
	 * myApp = myApp.toString();
	 */

	this.conference = function (params) {
		params.joinTone = params.joinTone || true;
		params.leavingTone = params.leavingTone || true;
		this.xml = this.xml.ele("Conference", params).up();
		return this;
	};

	/**
	 * Terminates an outgoing call.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * //This app will speak two sentences and hang up.
	 * var myApp = new BXMLResponse();
	 * myApp.speakSentence("Thanks for calling Unicorn Enterprises.")
	 *      .speakSentence("We have been acquired by BigCorp.")
	 *      .hangup();
	 * myApp = myApp.toString();
	 */

	this.hangup = function () {
		this.xml = this.xml.ele("Hangup").up();
		return this;
	};

	/**
	 * Plays an audio file located at a specified URL.
	 * @param {string} audio The URL of the audio to be played.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * //This app will put you on hold.
 	 * var myApp = new BXMLResponse();
	 * myApp.speakSentence("Thanks for calling Unicorn Enterprises.")
	 *      .speakSentence("All agents are currently busy playing ping-pong. Please hold.")
	 *      .playAudio("http://unico.rn/assets/postglamspeedfolk.mp3");
	 * myApp = myApp.toString();
	 */

	this.playAudio = function (audio) {
		this.xml = this.xml.ele("PlayAudio", {}, audio).up();
		return this;
	};
	/**
	 * Records the call. At end of call, a call recording event is sent to the callback URL.
	 * @param {Object} params The parameters for the Record verb.
	 * @param {string} [params.requestUrl] URL to send event and request new BXML.
	 * @param {number} [params.requestUrlTimeout] Timeout, in ms, to wait for requestUrl response.
	 * @param {string} [params.fileFormat] The format in which to save the recording - mp3 or wav.
	 * @param {string} [params.terminatingDigits] One or more digits that will finish the recording.
	 * @param {number} [params.maxDuration=300] Time, in seconds, for max duration. Up to 3600 sec (1hr)
	 * @param {boolean} [params.transcribe=false] Boolean to indicate transcription of the recording.
	 * @param {string} [params.transcribeCallbackUrl] URL to send transcribed event.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * //This app will record a message.
	 * var myApp = new BXMLResponse();
	 * myApp.speakSentence("Thanks for calling Unicorn Enterprises.")
	 *      .speakSentence("Your call may be recorded for quality assurance.")
	 *      .record({
	 *            requestUrl : "http://unico.rn/recordsGetPutHere",
	 *            fileFormat : "mp3"
	 *		});
	 */

	this.record = function (params) {
		this.xml = this.xml.ele("Record", params).up();
		return this;
	};

	/**
	 * Redirects the current execution to run XML at another URL.
	 * @param {Object} params The parameters for the Redirect verb.
	 * @param {string} params.requestUrl The URL to send event to and request new BXML.
	 * @param {number} params.requestUrlTimeout Timeout, in ms, to wait for requestUrl to respond.
	 * @return {BXMLResponse} this, for chaining.
	 */

	this.redirect = function (params) {
		this.xml = this.xml.ele("Redirect", params).up();
		return this;
	};
	/**
	 * Sends a text message.
	 * @param {string} message The message to send.
	 * @param {Object} params The parameters for the SendMessage verb
	 * @param {string} params.from The number to send the message from.
	 * @param {string} params.to The number to send the message to.
	 * @param {string} [params.requestUrl] The URL to send events to and request new BXML from.
	 * @param {number} [params.requestUrlTimeout=30] Timeout, in seconds, to wait for requestUrl to respond.
	 * @param {string} [params.statusCallbackUrl] URL to send the message callback to.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * // This app will text a customer.
	 * var myApp = new BXMLResponse();
	 * myApp.sendMessage("Get $20 off your next purchase!", {
	 * 		from : "+19195551212",
	 *		to   : "+19195551213"
	 * });
	 */
	this.sendMessage = function (message, params) {
		this.xml = this.xml.ele("SendMessage", params, message).up();
		return this;
	};

	/**
	 * Transfers the call to another number.
	 * @param {Object} params The parameters for the Transfer verb.
	 * @param {string} params.transferTo The number to transfer the call to.
	 * @param {string} [params.transferCallerId] The caller ID to use on the transferred call.
	 * @param {number} [params.callTimeout] The timeout, in seconds, for the call to be answered.
	 * @param {string} [params.requestUrl] URL to send event to and request new BXML from.
	 * @param {number} [params.requestUrlTimeout] Timeout, in msec, to wait for requestUrl to respond.
	 * @param {string} [params.tag] A string that will be included in the callback events.
	 * @param {function} callback The verbs to nest inside the Transfer verb.
	 * @return {BXMLResponse} this, for chaining.
	 * @example
	 * // This app will transfer a call.
	 * var myApp = new BXMLResponse();
	 * myApp.speakSentence("Your call is somewhat important to us.")
	 *		.speakSentence("Please wait while it is being transferred.")
	 *		.transfer({
	 * 			transferTo: "+19195551213"
	 *		}, function (){
	 * 			this.speakSentence("A call is being transferred to you from Customer Service.");
	 *		});
	 */
	this.transfer = function (params, callback) {
		this.xml = this.xml.ele("Transfer", params);
		callback = callback || function () {};
		callback.call(this);
		this.xml = this.xml.up();
		return this;
	};
};

module.exports.BXMLResponse = BXMLResponse;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Aug 09 2016 13:15:48 GMT+0000 (UTC) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
